<div class="route-detail">
    <div class="header">
        <div class="title-section">
            <h2>{{routeName}}</h2>
            <button class="edit-button" (click)="editRouteName()" title="Edit Route Name">
                <span class="material-icons">edit</span>
            </button>
        </div>
        <div class="header-buttons">
            <button [routerLink]="['/routes']" class="back-button">Back to Route List</button>
        </div>
    </div>

    <div class="content-wrapper">
        <div class="map-container">
            <div *ngIf="loading" class="loading">Loading route data...</div>
            <div *ngIf="error" class="error">{{ error }}</div>
            <div *ngIf="!loading && !error" #mapRef id="mapRef"></div>
            <button (click)="tryInitMap()" class="refresh-button" title="Refresh Map">
                <span class="material-icons">refresh</span>
            </button>
        </div>

        <div class="legend">
            <h4>Radiation Levels (ÂµSv/h)</h4>
            <div class="legend-items">
                <div class="legend-item" *ngFor="let item of legendItems">
                    <i [style.background-color]="item.color"></i>
                    <span class="range">{{item.range}}</span>
                    <span class="label">{{item.label}}</span>
                </div>
            </div>
        </div>
    </div>
</div>
<app-edit-route-name-modal 
    *ngIf="showEditModal"
    [currentName]="routeName"
    (save)="handleSaveRouteName($event)"
    (cancel)="handleCancelEdit()">
</app-edit-route-name-modal>